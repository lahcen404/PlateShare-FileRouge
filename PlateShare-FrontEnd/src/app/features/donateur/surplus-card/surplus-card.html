<div class="surplus-item-card bg-white rounded-lg shadow-md overflow-hidden flex flex-col">

  <!-- Image by Type -->
  <div *ngIf="surplus.type === TypeFoodEnum.BOULANGERIE">
    <img src="https://media.istockphoto.com/id/496564915/fr/photo/pain-et-petits-pains.jpg?s=1024x1024&w=is&k=20&c=ge0hY-mkXUhvBGfuV2mEHAbDQfRljBoj4oQhHaJGkpo=" alt="Boulangerie" class="w-full h-48 object-cover">
  </div>
  <div *ngIf="surplus.type === TypeFoodEnum.VIANDE">
    <img src="https://media.istockphoto.com/id/1443190699/fr/photo/diff%C3%A9rents-types-de-viande-crue.jpg?s=1024x1024&w=is&k=20&c=M_yMwp0LsNpRHdLKrE6PpaguVCTAnP7w_V_gtLbssqE=" alt="Viande" class="w-full h-48 object-cover">
  </div>
  <div *ngIf="surplus.type === TypeFoodEnum.FRUITS">
    <img src="https://media.istockphoto.com/id/995518546/fr/photo/assortiment-de-fruits-tropicaux-m%C3%BBrs-color%C3%A9s-vue-de-dessus.jpg?s=1024x1024&w=is&k=20&c=QBRPUi-43lfaJH-Q7pFSV7qVg_kj21GqClIVHyU4Jw0=" alt="Fruits" class="w-full h-48 object-cover">
  </div>
  <div *ngIf="surplus.type === TypeFoodEnum.PRODUITS_LAITIERS">
    <img src="https://media.istockphoto.com/id/1282674427/fr/photo/produits-laitiers-frais-sur-la-table-de-cuisine.jpg?s=1024x1024&w=is&k=20&c=0ra4uP1DqC_kfYFZOBLTYIbPK2h9hvVBa3SSsZf_83w=" alt="Produits Laitiers" class="w-full h-48 object-cover">
  </div>
  <div *ngIf="surplus.type === TypeFoodEnum.LEGUMES">
    <img src="https://media.istockphoto.com/id/589415708/fr/photo/fruits-et-l%C3%A9gumes-frais.jpg?s=1024x1024&w=is&k=20&c=mhnAEil9ZG-TpP4G74oMBzcKCf5aYq2N1lYOLuurm24=" alt="LÃ©gumes" class="w-full h-48 object-cover">
  </div>

  <!-- Content -->
  <div class="p-4 flex flex-col flex-grow">

    <h3 class="text-lg font-semibold text-gray-800 mb-1">{{ surplus.nom }}</h3>
    <p class="text-sm text-gray-600 mb-1"><span class="font-medium">Quantity:</span> {{ surplus.quantite }}</p>
    <p class="text-sm text-gray-600 mb-3"><span class="font-medium">Expires:</span> {{ surplus.dateExpiration }}</p>

    <!-- Type + Status badge -->
    <div class="flex justify-between items-center mb-4">
      <span class="text-sm font-semibold text-gray-700 bg-gray-100 px-3 py-1 rounded-full">{{ surplus.type }}</span>
    </div>

    <!-- Reserve Button -->
    <div *ngIf="authService.getRole()==='DEMANDEUR'">
    <button (click)="reserveSurplus()" class="mt-auto w-full bg-plateshare-green hover:bg-opacity-90 text-white px-4 py-2 rounded-md text-sm font-medium shadow-md transition">
      <i class="fas fa-shopping-basket mr-2"></i>Reserve Now
    </button>
  </div>
    <!-- Edit/Delete buttons for Donateur -->
    <div *ngIf="authService.getRole() === 'DONATEUR'" class="mt-3 flex flex-col sm:flex-row gap-2">
      <button
        class="flex-1 flex items-center justify-center gap-2 bg-yellow-100 text-yellow-700 hover:bg-yellow-200 font-semibold py-2 px-4 rounded-md text-sm transition shadow-sm"
        (click)="onEdit(surplus)">
        <i class="fas fa-edit"></i>Edit
      </button>

      <button
        class="flex-1 flex items-center justify-center gap-2 bg-red-100 text-red-700 hover:bg-red-200 font-semibold py-2 px-4 rounded-md text-sm transition shadow-sm"
        (click)="onDelete(surplus.id!)">
        <i class="fas fa-trash-alt"></i>Delete
      </button>
    </div>

  </div>
</div>
